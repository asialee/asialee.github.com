---
layout: post
description:
keywords: NoSQL Database
title: NoSQL简介
categories: [NoSQL Database]
tags: [Database]
group: archive
icon: code
---

在之前的几十年里面，传统的关系型数据库，以其简单、优美的设计，不错的性能还有较好地稳定性基本垄断了整个数据库领域。也对互联网的发展做出了极大的贡献。在90年代，网站的访问量不大，网页以静态网页为主，互动社交类应用极少。简单的关系型数据库足以cover绝大部分的应用。

然而最近十几年，web2.0时代的来临，UGC系统的出现，事情发生了极大的变化。传统的关系型数据库已经很难应付多变的应用场景：高并发查询，复杂的数据关系，不规则的数据类型...一种不再基于传统E-R模型的新型数据库开始出现，并开始大行其道。这类数据库统称为NoSQL（Not Only SQL）,可以预见的是，在不久的将来，传统的关系型数据库将渐渐退出历史舞台。

最近[InfoQ](http://www.infoq.com/cn/news/2011/01/nosql-why)上看到一篇文章介绍了最近10多年来关系型数据库为了适应时代发展所作出的努力，从中可以窥见现今应用对数据库的需求。所以本文一开始先来回顾一下这段历史。

#Memcached+MySQL#
随着访问量的上升，大部分的MySQL数据库都开始出现了瓶颈上的问题。为了追求更好的性能，程序员开始将缓存技术引入到数据库中，但是当访问量继续上升的时候，集群中多个节点之间缓存不能共享，大量的文件传输也带来了较大的IO压力。
这个时候Memcached作为一个独立的分布式缓存服务器出现了，Memcached为多个服务器提供了一个共享的高性能缓存服务器。同时有利用hash算法进行多态web机器的cache扩展。使得MySQL的问题得到了一定缓解。

#MySQL主从读写分离#
Memcached只能缓解数据库的读取压力，但并不能缓解数据库的写入压力。读写操作集中在同一个数据库让数据库不堪重负。数据库的读写分离开始出现以提高数据库的读扩展性和读写性能。Mysql的master-slave架构开始大行其道。

#分表分库#
数据库写的压力进一步提升，数据量持续上升。传统的关系型数据库使用MyISAM,MyIASM使用表锁，这在并发的情况下会出现严重的问题。进而大量的MySQL应用想InnoDB引擎转变。同时业界也出现了利用分表分库的方法来缓解写入压力和数据增长的扩展问题。

#NoSQL出现#
以上的种种做法其实都相当于打补丁的方式，哪里有问题就优化哪里。不过治标不治本，传统关系型数据库在设计时就不是一个可以针对当今海量数据存储的数据库。由于其对数据模式和数据类型的严格要求，较差的扩展性还有昂贵的join类操作成本都使得mysql已不再适用于当今的海量数据。所以NoSQL应运而生了。

- 易扩展:去掉了关系型数据库的关系特性，数据之间没有关系，这样就非常容易扩展。
- 灵活的数据模型:NoSQL无需为要存储的数据提前建立字段，随时可以存储自定义的字段。这就从根本上去除了关系型数据库在一开始建表的时候就建立起来的对于数据的严格限制。
- 大数据量，高性能：更高的读写性能，这得益于其的无关系型和细粒度的Cache记录。

#NoSQL的种类#
- Key-value对：这是最为简单的一种NoSQL。该类数据库通过利用map或者字典这类的集合来记录key-value对。所有的数据都是以key-value对的形式存储的。每一个key在数据库中都是唯一的。这类数据库的扩展极为简单，对key-value对的数量和类型都没有区别。不同的key-value数据库在存储的时候排序是不一样的，这取决于具体的应用场景。比较著名的有MongoDB redis等等
- Graph Database：这类数据库以图的形式来存储数据，节点相当于原有关系型数据库中的实体（entity），而边则对应于relation。这种数据库的应用场景鲜明。例如社交网络，网络拓扑等等。其中最为著名就是Neo4j，稍后我会专门写一篇文章来介绍neo4j
- Document Store：文档型数据库的中心思想就是利用良好定义的数据格式来将数据封装到文档中。比较流行的数据可是包括有XML JSON或者二进制文件。